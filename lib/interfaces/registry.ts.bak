import type { Direction, MessageDefinition } from "@/lib/types";
import lbaseOutboundSfar from "@/lib/interfaces/lbase_outbound_sfar_fahrt.json";

export type SystemDef = { id: string; title: string };

export const SYSTEMS: SystemDef[] = [
  { id: "lbase", title: "LBase" },
  { id: "translogica", title: "Translogica" },
  { id: "sap", title: "SAP" },
  { id: "lfs", title: "LFS7/8" },
  { id: "warta", title: "Warta" },
];

const ALL_MESSAGES: MessageDefinition[] = [
  lbaseOutboundSfar as unknown as MessageDefinition,
];

// direction determines which side is fixed:
// - Outbound: source fixed (internal) -> destination customer
// - Inbound: destination fixed (internal) <- source customer
export function listMessagesFor(systemId: string, direction: Direction): MessageDefinition[] {
  return ALL_MESSAGES
    .filter(m => m.systemId === systemId)
    .filter(m => {
      const fixedSide = direction === "outbound" ? "source" : "destination";
      return m.directionRole.fixedSide === fixedSide;
    });
}

export function getMessageById(messageId: string): MessageDefinition | undefined {
  return ALL_MESSAGES.find(m => m.id === messageId);
}
